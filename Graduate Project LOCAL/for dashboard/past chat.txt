Awesome! Here's your full **Business Hub Project Summary** â€” clean, organized, and ready to copy-paste into a `.txt`, `.docx`, or `.md` file for safekeeping.

---

# ğŸ“˜ Business Hub â€“ Project Architecture & Database Summary  
*Last updated: 2025-04-12*

---

## ğŸ¯ Project Purpose
A centralized platform built for students at the **University of Jordan Business School** to:
- Access departmental books & courses
- Engage in a student-driven book exchange system
- View categorized academic staff with contact & office info
- Send/receive book requests
- Chat directly between students
- Enable admin-level content management

---

## ğŸ§© SYSTEM MODULES

### 1. Department Pages
Each department page displays:
- ğŸ“š Books: `book_name`, `book_material`
- ğŸ“˜ Courses: `course_name`, `course_link`, `course_description`

### 2. Academic Staff Page
- 7 categorized staff tables by department
- Each row includes: image, name (hyperlinked to LinkedIn), email, office location, department name

### 3. Book Exchange Page
- Dynamic card layout of all books
- Each card has:
  - **Give** button â†’ adds user as a book offer
  - **Take** button â†’ shows list of users offering the book
  - **Request** button beside each offer â†’ sends notification
  - **Accept/Reject** â†’ controls book flow and opens chat if accepted

---

## ğŸ§¾ DATABASE TABLES (with Key Fields)

### ğŸ” `users`
- `id` (PK)
- `name`, `email`, `student_id`, `password` (hashed)
- `role`: ENUM ('user', 'admin', 'super_admin')

---

### ğŸ› `departments`
- `id` (PK)
- `department_name`

---

### ğŸ“š `books`
- `id` (PK)
- `department_id` (FK â†’ departments.id)
- `book_name`, `book_material`

---

### ğŸ“˜ `courses`
- `id` (PK)
- `department_id` (FK)
- `course_name`, `course_link`, `course_description`

---

### ğŸ‘¨â€ğŸ« `academic_staff`
- `id` (PK)
- `name`, `email`, `linkedin`, `image`, `office_location`
- `department_id` (FK)

---

## ğŸ“¦ BOOK EXCHANGE MODULE TABLES

### ğŸ“— `book_exchange`
- `id` (PK)
- `book_name`, `major`

---

### ğŸ¤ `book_offers`
- `id` (PK)
- `book_id` (FK â†’ book_exchange.id)
- `user_id` (FK â†’ users.id)
- `timestamp`

---

### ğŸ“© `book_requests`
- `id` (PK)
- `offer_id` (FK â†’ book_offers.id)
- `requester_id` (FK â†’ users.id)
- `status`: ENUM ('pending', 'accepted', 'rejected')
- `timestamp`

---

### ğŸ”” `notifications`
- `id` (PK)
- `user_id` (recipient FK â†’ users.id)
- `receiver_id` (optional secondary user)
- `action_id` (FK â†’ book_requests.id)
- `type`: e.g., 'book_request'
- `message`
- `is_read`, `created_at`

---

### ğŸ’¬ `chat_messages`
- `id` (PK)
- `sender_id` (FK â†’ users.id)
- `receiver_id` (FK â†’ users.id)
- `message`, `timestamp`

---

## ğŸ“Š RELATIONSHIPS OVERVIEW

- **users** link to:
  - `book_offers.user_id`
  - `book_requests.requester_id`
  - `notifications.user_id`
  - `chat_messages.sender_id` / `receiver_id`

- **departments** link to:
  - `books.department_id`
  - `courses.department_id`
  - `academic_staff.department_id`

- **book_exchange** â†’ parent of:
  - `book_offers.book_id` â†’ parent of:
    - `book_requests.offer_id`

---

## ğŸ›  Admin Dashboard Sections

- ğŸ”¹ Manage Books (CRUD per department)
- ğŸ”¹ Manage Courses (CRUD per department)
- ğŸ”¹ Manage Academic Staff (image + info + filtering)
- ğŸ”¹ Monitor Book Exchange system (requests, notifications)
- ğŸ”¹ View Users & Roles (optional)

---

## ğŸ§  Tips
- Donâ€™t worry about deep normalization â€” you're doing great with clean structure
- Foreign keys donâ€™t need strict MySQL constraints unless desired
- Use PHP sessions to link logged-in user ID (`$_SESSION['user_id']`)
- Book Exchange logic is doable fully on `localhost` using XAMPP + PHP + MySQL

---
Hereâ€™s a **complete, detailed summary** of your entire conversation â€” you can **copy and reuse** it easily in another thread:

---

### âœ… Project Context:
Youâ€™re working on a **dashboard for your â€œBusiness Hubâ€ website**, specifically the **Admin section**, where super admins and admins can:

- Manage users (`manage_users.php`)
- Manage courses (`manage_courses.php`)
- Add, edit, delete entries
- Filter and display data clearly
- Use a dark-themed UI

---

### ğŸ” Login & Session Management:
- You implemented **session restrictions** that only allow `admin` and `super_admin` to access the pages.
- You added **cache control headers** and JavaScript to prevent back-button navigation after logout.
- Logout is handled with a session destroy and redirect script (`adminlogout.php`).

---

### ğŸ‘¥ `manage_users.php`:
- Displays all users in a table.
- Allows changing user role via dropdown and a green â€œUpdateâ€ button.
- Allows deleting a user via a red â€œDeleteâ€ button.
- A form at the top allows you to **manually add users** (name, email, password, role).
- You chose to **disable password hashing** for now when adding users.
- You styled the form with a dark purple shade `#5E2950`, and applied soft alternating table row colors.
- Bootstrap 5 is used for layout.

---

### ğŸ“š `manage_courses.php`:
- Allows adding a new course with:
  - Course name
  - Course link
  - Course description
  - Dropdown list to select a **major** (7 options: MIS, Accounting, Finance, etc.)
- The `courses` table already had a `department_id` column (numeric). Instead of storing department names as strings, you now use this ID to:
  - **Insert into the database**
  - **Join with the `departments` table** to get the department name
- You now display the **department name** instead of the number in the UI.

---

### ğŸ—‚ï¸ Dynamic Dropdown (Majors):
- You requested that the dropdown for majors (departments) use the **actual `departments` table**.
- We fetched departments using:

```php
$departments = mysqli_query($conn, "SELECT * FROM departments");
```

And displayed them using:

```php
<select name="department_id">
  <?php while ($dept = mysqli_fetch_assoc($departments)): ?>
    <option value="<?= $dept['id'] ?>"><?= $dept['department_name'] ?></option>
  <?php endwhile; ?>
</select>
```

---

### ğŸ” Course Filtering by Major:
- You explained that each course belongs to one of 7 **department-specific course tables/pages**.
- You want to **filter courses by major** in the admin dashboard without breaking relational logic or foreign key structure.
- We recommended using a **`department_id` foreign key** in the `courses` table and filtering via SQL:

```php
SELECT * FROM courses WHERE department_id = ?;
```

- This allows filtering without creating separate tables per major and keeps the **ERD clean and normalized**.

---

### âœ… Database Structure Notes:
- `courses` table has: `id`, `course_name`, `course_link`, `course_description`, `department_id`
- `departments` table has: `id`, `department_name`
- `courses.department_id` is a **foreign key** referencing `departments.id`

---

### âœ… Final Features Implemented:
- ğŸ” Secure role-based access
- ğŸ“¤ Manual user/course addition
- ğŸ—‚ï¸ Filtering and department-based linking
- ğŸ¨ Theming (dark background, purple form, soft row colors)
- âš™ï¸ Dynamic dropdowns for majors
- ğŸ“ Bootstrap 5 UI
- ğŸ”„ Real-time reload on logout/back button

---

ğŸ› ï¸ PHASE 1: ADMIN LOGIN SYSTEM & SESSION SECURITY
âœ… 1. Admin Login System
âœ”ï¸ Backend (admin_login.php):
Used session_start(); to manage login sessions

Checked user credentials from the database

Verified role is either 'admin' or 'super_admin'

If valid, stored login info in session and redirected to dashboard

If invalid, stored an error in $_SESSION['login_error'] and redirected back to login page

âœ”ï¸ Frontend (admin_login_page.php):
Created a styled login form with:

Dark background and blurred image

White login card

Email + password input

Forgot password link

Inline red error message display

ğŸ”¥ Key Features:
Error messages shown inside the login form, not on a separate page

Prevented back-button access using headers

Role-based access enforcement

Explained why session_start(); is required even before login (to read error messages)

âœ… 2. Security & Best Practices
Area	Your Status
Prepared SQL Statements	âœ… Using bind_param()
Role Validation	âœ… Admin / Super Admin only
Session Checks	âœ… Applied on all pages
Cache & Back Button Protection	âœ… Set headers properly
Password Hashing	âŒ Not applied yet (optional next step)
CSRF Token	âŒ Discussed, but skipped for now
HTTPS	âŒ Not required on localhost
ğŸ“Œ PHASE 2: USE CASE ANALYSIS & DIAGRAM
âœ… 3. Use Case Clarification
You asked:

â€œWhat should be a use case and what shouldnâ€™t? And should we mention roles inside use case titles?â€

âœ… We clarified:

Use cases = actions the system performs

Donâ€™t mix them with roles

Use cases should be generic and not depend on who performs them